<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Sky Dodge - Login</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
</head>
<body>
    <div style="text-align: center; margin-top: 50px;">
        <h2>ĐĂNG NHẬP / ĐĂNG KÝ</h2>
        <input type="email" id="email" placeholder="Email"><br><br>
        <input type="password" id="password" placeholder="Mật khẩu"><br><br>
        <button onclick="handleAuth()">VÀO HỆ THỐNG</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBbdRGcZmqt5-ywPyssZ1C2CDoj11slDQs",
            authDomain: "sky-dodge-8f537.firebaseapp.com",
            projectId: "sky-dodge-8f537",
            storageBucket: "sky-dodge-8f537.firebasestorage.app",
            messagingSenderId: "169224412363",
            appId: "1:169224412363:web:e7160623b367e012854f4e"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        async function handleAuth() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            try {
                // Thử đăng ký, nếu mail đã tồn tại thì tự động đăng nhập
                await auth.createUserWithEmailAndPassword(email, pass)
                    .catch(error => {
                        if (error.code === 'auth/email-already-in-use') {
                            return auth.signInWithEmailAndPassword(email, pass);
                        }
                        throw error;
                    });
                window.location.href = "index.html";
            } catch (e) {
                alert("Lỗi: " + e.message);
            }
        }
    </script>
</body>
</html>
