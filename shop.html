<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ª≠a h√†ng V√°n</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        /* THANH TR∆Ø·ª¢T NGANG */
        .carousel {
            display: flex; overflow-x: auto; width: 100%; padding: 40px 0;
            scroll-snap-type: x mandatory; gap: 20px; scrollbar-width: none;
        }
        .carousel::-webkit-scrollbar { display: none; }
        
        .paddle-item {
            flex: 0 0 200px; height: 100px; background: #333;
            border-radius: 15px; scroll-snap-align: center;
            display: flex; justify-content: center; align-items: center;
            transition: 0.3s; border: 4px solid transparent; cursor: pointer;
        }
        .paddle-item.active { border-color: #4CAF50; transform: scale(1.1); box-shadow: 0 0 20px #4CAF50; }
        .paddle-preview { width: 140px; height: 15px; border-radius: 10px; }

        /* PH·∫¶N CH·ªà S·ªê ·ªû D∆Ø·ªöI */
        .info-panel {
            background: #262626; width: 90%; max-width: 400px; 
            padding: 20px; border-radius: 20px; text-align: center;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }
        .price-tag { color: #ffeb3b; font-size: 24px; font-weight: bold; margin: 10px 0; }
        .stat-text { color: #00e5ff; font-size: 18px; margin-bottom: 20px; }

        .btn-upgrade {
            background: #4CAF50; color: white; border: none; padding: 15px 40px;
            font-size: 18px; font-weight: bold; border-radius: 30px; cursor: pointer;
        }
        .btn-upgrade:disabled { background: #555; cursor: not-allowed; }
        
        .nav-bottom { margin-top: 20px; display: flex; gap: 20px; }
    </style>
</head>
<body>

    <h2>CH·ªåN V√ÅN C·ª¶A B·∫†N</h2>
    <div style="color:#aaa">S·ªë d∆∞: <span id="my-coins">0</span> Xu</div>

    <div class="carousel" id="carousel">
        </div>

    <div class="info-panel">
        <h3 id="p-name">T√™n V√°n</h3>
        <div class="stat-text">S·ª©c ch·ª©a: <span id="p-cap">0</span>kg</div>
        <div class="price-tag" id="p-price">0 Xu</div>
        <button id="action-btn" class="btn-upgrade" onclick="handleAction()">N√ÇNG C·∫§P</button>
    </div>

    <div class="nav-bottom">
        <button onclick="location.href='index.html'">Quay l·∫°i</button>
    </div>

<script>
    const paddleData = [
        { id: 'default', name: 'V√°n G·ªó', cap: 100, price: 0, color: '#fff', level: 0 },
        { id: 'iron', name: 'V√°n S·∫Øt', cap: 250, price: 500, color: '#757575', level: 1 },
        { id: 'gold', name: 'V√°n V√†ng', cap: 600, price: 2000, color: '#FFD700', level: 2 },
        { id: 'diamond', name: 'V√°n Kim C∆∞∆°ng', cap: 1500, price: 5000, color: '#00E5FF', level: 3 }
    ];

    let currentIndex = 0;
    let myLevel = parseInt(localStorage.getItem('userLevel')) || 0; // C·∫•p ƒë·ªô v√°n cao nh·∫•t ƒë√£ m·ªü
    let myCoins = 0; // S·∫Ω l·∫•y t·ª´ Firebase

    // L·∫§Y XU T·ª™ FIREBASE (Gi·∫£ l·∫≠p ho·∫∑c k·∫øt n·ªëi th·∫≠t)
    function loadUserData() {
        // Duy ch√®n code l·∫•y coins t·ª´ Firebase c·ªßa Duy v√†o ƒë√¢y
        myCoins = 1000; // V√≠ d·ª• ƒëang c√≥ 1000 xu
        document.getElementById('my-coins').innerText = myCoins;
        renderCarousel();
        updateInfo();
    }

    function renderCarousel() {
        const carousel = document.getElementById('carousel');
        carousel.innerHTML = paddleData.map((p, index) => `
            <div class="paddle-item ${index === currentIndex ? 'active' : ''}" onclick="setIndex(${index})">
                <div class="paddle-preview" style="background: ${p.color}"></div>
                ${p.level > myLevel ? '<span style="position:absolute">üîí</span>' : ''}
            </div>
        `).join('');
    }

    function setIndex(index) {
        currentIndex = index;
        renderCarousel();
        updateInfo();
    }

    function updateInfo() {
        const p = paddleData[currentIndex];
        document.getElementById('p-name').innerText = p.name;
        document.getElementById('p-cap').innerText = p.cap;
        const btn = document.getElementById('action-btn');

        if (p.level <= myLevel) {
            document.getElementById('p-price').innerText = "ƒê√É S·ªû H·ªÆU";
            btn.innerText = "S·ª¨ D·ª§NG";
            btn.disabled = false;
        } else if (p.level === myLevel + 1) {
            document.getElementById('p-price').innerText = p.price + " Xu";
            btn.innerText = "N√ÇNG C·∫§P";
            btn.disabled = myCoins < p.price;
        } else {
            document.getElementById('p-price').innerText = "CH∆ØA TH·ªÇ M·ªû";
            btn.innerText = "B·ªä KH√ìA";
            btn.disabled = true;
        }
    }

    function handleAction() {
        const p = paddleData[currentIndex];
        const btn = document.getElementById('action-btn');

        if (btn.innerText === "S·ª¨ D·ª§NG") {
            localStorage.setItem('selectedPaddle', p.id);
            alert("ƒê√£ trang b·ªã " + p.name);
        } else if (btn.innerText === "N√ÇNG C·∫§P") {
            // Tr·ª´ xu v√† tƒÉng Level
            myCoins -= p.price;
            myLevel = p.level;
            localStorage.setItem('userLevel', myLevel);
            // ·ªû ƒë√¢y Duy c·∫ßn th√™m l·ªánh Update xu l√™n Firebase
            loadUserData();
        }
    }

    loadUserData();
</script>
</body>
</html>
