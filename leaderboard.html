<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKY DODGE - B·∫£ng X·∫øp H·∫°ng</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; margin: 0; padding: 20px; text-align: center; }
        .container { max-width: 500px; margin: auto; background: #2c3e50; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 2px solid #8BC34A; }
        h1 { color: #8BC34A; text-transform: uppercase; letter-spacing: 2px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { border-bottom: 2px solid #8BC34A; padding: 10px; color: #8BC34A; }
        td { padding: 15px; border-bottom: 1px solid #3e4f5f; }
        .rank-1 { color: #FFD700; font-weight: bold; font-size: 22px; }
        .rank-2 { color: #C0C0C0; font-weight: bold; }
        .rank-3 { color: #CD7F32; font-weight: bold; }
        .back-btn { margin-top: 25px; padding: 12px 30px; background: #8BC34A; color: white; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; }
    </style>
</head>
<body>

<div class="container">
    <h1>TOP 10 CHI·∫æN BINH</h1>
    <table>
        <thead>
            <tr>
                <th>H·∫°ng</th>
                <th>T√™n</th>
                <th>K·ª∑ l·ª•c (s)</th>
            </tr>
        </thead>
        <tbody id="leaderboard-body">
            <tr><td colspan="3">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
        </tbody>
    </table>
    <button class="back-btn" onclick="location.href='index.html'">QUAY L·∫†I</button>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBbdRgcZmqt5-ywPyssZ1C2CDoj11slDQs",
        authDomain: "sky-dodge-8f537.firebaseapp.com",
        databaseURL: "https://sky-dodge-8f537-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "sky-dodge-8f537",
        storageBucket: "sky-dodge-8f537.firebasestorage.app",
        messagingSenderId: "169224412363",
        appId: "1:169224412363:web:de0d018158d8b34e854f4e"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // L·∫•y d·ªØ li·ªáu
    db.ref('leaderboard').orderByChild('score').limitToLast(10).on('value', (snapshot) => {
        let list = [];
        snapshot.forEach(child => {
            list.push(child.val());
        });
        
        list.sort((a, b) => b.score - a.score);

        let html = '';
        if (list.length === 0) {
            html = '<tr><td colspan="3">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>';
        } else {
            list.forEach((user, index) => {
                let rank = index + 1;
                let rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                let rankIcon = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : rank;

                html += `<tr class="${rankClass}">
                    <td>${rankIcon}</td>
                    <td>${user.name || "·∫®n danh"}</td>
                    <td>${user.score}</td>
                </tr>`;
            });
        }
        document.getElementById('leaderboard-body').innerHTML = html;
    });
</script>
</body>
</html>
